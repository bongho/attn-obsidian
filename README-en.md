# 🎵 Audio To Tidied Notes (ATTN)

[![Tests](https://github.com/bongho/attn-obsidian/actions/workflows/test.yml/badge.svg)](https://github.com/bongho/attn-obsidian/actions/workflows/test.yml)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![TypeScript](https://img.shields.io/badge/TypeScript-007ACC?style=flat&logo=typescript&logoColor=white)](https://www.typescriptlang.org/)
[![Obsidian](https://img.shields.io/badge/Obsidian-483699?style=flat&logo=obsidian&logoColor=white)](https://obsidian.md/)

**📖 Language / 언어**: [English](README-en.md) | [한국어](README.md) | **📋 Documentation**: [PRD (English)](prd.md) | [PRD (한국어)](prd-ko.md)

> 🚀 **High-Quality Obsidian Plugin Built with TDD**  
> Automatically convert M4A audio files to structured meeting notes using OpenAI Whisper & GPT

## ✨ Core Features

### 🎯 **One-Click Automation**
- Right-click M4A files → Select "ATTN: Generate Note" → Done!
- Convert speech to text using OpenAI Whisper
- Generate structured meeting notes automatically with GPT-4

### 🛠️ **Advanced Customization** (v2.0 NEW!)
- **📁 Save Folder Path**: Freely configure where generated notes are saved
- **📝 Filename Template**: Dynamic filename generation with placeholders
- **🎨 Note Content Template**: Fully customizable note structure design

### 🔧 **Template Engine**
**Available Placeholders:**
```
{{filename}}        - Original audio filename
{{summary}}          - AI-generated summary
{{transcript}}       - Full text (future support)
{{date:YYYY-MM-DD}}  - Date (supports various formats)
{{time:HH:mm}}       - Time (supports various formats)
```

**Template Example:**
```
📁 Save Folder: "Meetings/{{date:YYYY}}/{{date:MM}}"
📄 Filename Template: "{{date:MM-DD}}-{{filename}}"
📝 Content Template:
# 📅 {{date:YYYY-MM-DD}} Meeting Notes

**🎵 Source File:** {{filename}}  
**⏰ Created:** {{time:HH:mm}}

## 📋 Summary
{{summary}}

---
*🤖 Auto-generated by ATTN plugin*
```

### 🌍 **Multi-language Support**
- **Korean Optimized**: Specialized for Korean speech recognition and summarization
- Other languages work within OpenAI API support range

### 🔐 **Security**
- API keys stored locally (secure Obsidian plugin data)
- No data stored on external servers (except OpenAI processing)

## 📦 Installation

### Manual Installation (Currently Available)

#### 1. Download Required Files
Download the following files from [GitHub Releases](https://github.com/bongho/attn-obsidian/releases):
- `manifest.json`
- `main.js` 
- `styles.css` (if available)

Or if you want the full source:
- `scripts/` directory
- `src/` directory 

#### 2. Create Plugin Folder and Copy Files

1. **Find your Obsidian vault's plugin directory:**
   ```
   [Vault Path]/.obsidian/plugins/
   ```

2. **Create new plugin folder:**
   ```
   [Vault Path]/.obsidian/plugins/audio-to-tidied-notes/
   ```

3. **Copy downloaded files to the newly created folder**

#### 3. Activate Plugin

1. Go to **Obsidian Settings** → **Community plugins**
2. Click **"Reload plugins"** button (or restart Obsidian)
3. Find **"Audio To Tidied Notes"** in the plugin list
4. Set the **activation** toggle to ON

#### 4. Verify Setup Complete

- Check that **"Audio To Tidied Notes"** settings tab appears in the right settings after activation
- Verify that **"ATTN: Generate Summary Note"** menu appears when right-clicking M4A files
  
## ⚙️ Initial Setup

1. **Get OpenAI API Key**
   - Generate API key at [OpenAI Platform](https://platform.openai.com/api-keys)
   - Payment method registration required (usage-based billing)

2. **Install FFmpeg** (Optional, for audio speed control)
   ```bash
   # macOS (Homebrew)
   brew install ffmpeg
   
   # Windows (Chocolatey)
   choco install ffmpeg
   
   # Ubuntu/Debian
   sudo apt install ffmpeg
   ```
   
   **Check FFmpeg Path:**
   ```bash
   # Check installed FFmpeg path
   which ffmpeg          # macOS/Linux
   where ffmpeg          # Windows
   ```

3. **Plugin Configuration**
   ```
   Obsidian Settings → Community Plugins → Audio To Tidied Notes
   
   📝 Default Settings:
   - OpenAI API Key: sk-... (Required)
   - Save Folder Path: / (Root)
   - Filename Template: {{date:YYYY-MM-DD}}-{{filename}}-meeting-notes
   - Content Template: (Default meeting format)
   - Audio Speed Multiplier: 1x (Default) / 2x / 3x
   - FFmpeg Path: (Optional, manual setup if auto-detection fails)
   ```

## 🚀 How to Use

### Basic Usage
1. Add **M4A file** to your Obsidian vault
2. **Right-click** in file explorer
3. Select **"ATTN: Generate Summary Note"**
4. Wait for processing completion (progress notifications shown)
5. Check your automatically generated structured meeting notes! 🎉

### Advanced Customization Examples

**Business Meeting Template:**
```
📁 Save Folder: "Business/Meetings/{{date:YYYY}}"
📄 Filename: "{{date:MM-DD}}-{{filename}}"
📝 Content:
# 📊 Business Meeting - {{date:YYYY.MM.DD}}

**Attendees File:** {{filename}}  
**Date & Time:** {{date:YYYY-MM-DD}} {{time:HH:mm}}

## 🎯 Executive Summary
{{summary}}

## 📋 Action Items
- [ ] TBD (Extract from summary)

---
**Next Meeting:** TBD  
*🤖 Generated by ATTN*
```

**Study Group Template:**
```
📁 Save Folder: "Study/{{date:YYYY}}/{{date:MM}}"
📄 Filename: "Week{{date:WW}}-{{filename}}"
📝 Content:
# 📚 Study Notes

**Date:** {{date:YYYY-MM-DD (ddd)}}  
**Time:** {{time:HH:mm}}  
**File:** {{filename}}

## 💡 Key Content
{{summary}}

## 📝 Notes
- 

---
*📖 Study Group*
```

## 🧪 Developer Information

### High-Quality Codebase Built with TDD Methodology

```bash
✅ 80 Total Tests (73 Passed, 91.25% Success Rate)
✅ TypeScript-based type-safe implementation
✅ ESLint + Prettier code quality management
✅ Comprehensive Jest test coverage
✅ Modular architecture (Extensibility & Maintainability)
```

### Development Environment Setup

```bash
# Clone repository
git clone https://github.com/bongho/attn-obsidian.git
cd attn-obsidian

# Install dependencies
npm install

# Run development mode (Hot reload)
npm run dev

# Run tests
npm test

# Check test coverage
npm test -- --coverage

# Type checking
npm run typecheck

# Lint checking
npm run lint

# Production build
npm run build
```

### Project Structure

```
ATTN/
├── src/                          # 📁 Source Code
│   ├── main.ts                  # 🎭 Orchestrator (coordinates all modules)
│   ├── settings.ts              # ⚙️ Settings UI management
│   ├── templateProcessor.ts     # 🎨 Template Engine (NEW!)
│   ├── apiService.ts            # 🤖 OpenAI API integration
│   ├── noteCreator.ts           # 📝 Note generation (refactored)
│   └── types.ts                 # 📋 TypeScript interfaces
├── tests/                       # 🧪 TDD Test Suite
│   ├── TemplateProcessor.test.ts # 🆕 Template engine tests
│   ├── SettingsTab.test.ts      # 📈 Extended settings tests
│   ├── ApiService.test.ts       # 🔄 API logic tests
│   ├── NoteCreator.test.ts      # 🔄 Note generation tests
│   └── main.test.ts             # 🔄 Integration tests
├── package.json                 # 📦 Dependency management
├── tsconfig.json               # ⚙️ TypeScript configuration
├── jest.config.js              # 🧪 Test configuration
└── main.js                     # 🚀 Built plugin
```

## 💰 API Usage Costs

OpenAI API charges:
- **Whisper API**: ~$0.006/minute (Speech → Text)
- **GPT-4 API**: Varies by text length (Summary generation)

*Example: 30-minute meeting → approximately $0.20~0.50*

## 🏗️ Architecture Features

### Before & After Comparison

| Feature | v1.0 (Original) | v2.0 (Enhanced) |
|---------|----------------|----------------|
| **Filename** | `Fixed: filename-meeting.md` | `Template: {{date:MM-DD}}-{{filename}}` |
| **Save Location** | `Root folder only` | `Flexible folder structure` |
| **Note Format** | `Fixed template` | `Fully customizable` |
| **Extensibility** | `Limited` | `Unlimited placeholder combinations` |

### TDD Development Achievements

```
🧪 Phase 1: Settings Enhancement & Template Engine
  ✅ Extended ATTNSettings interface
  ✅ Added SettingsTab UI components
  ✅ Implemented TemplateProcessor module

🔄 Phase 2: Core Logic Refactoring  
  ✅ Simplified NoteCreator responsibilities
  ✅ Applied orchestrator pattern to main.ts
  ✅ Minimized inter-module coupling

✨ Result: Extensible and maintainable architecture
```

## 🤝 Contributing

1. **Fork** the repository
2. Create **Feature branch** (`git checkout -b feature/amazing-feature`)
3. Write **Tests** first (TDD approach)
4. **Implement** and verify tests pass
5. **Commit** (`git commit -m 'Add some amazing feature'`)
6. **Push** (`git push origin feature/amazing-feature`)
7. Create **Pull Request**

### Contribution Guidelines

- ✅ **TDD Required**: Write tests first
- ✅ **TypeScript**: Maintain type safety  
- ✅ **ESLint**: Follow code style guidelines
- ✅ **Test Coverage**: Maintain 90%+ coverage for new features

## 📄 License

MIT License - See [LICENSE](LICENSE) file for details

## 🙋‍♂️ Support & Contact

### Troubleshooting
1. Check **console error messages**
2. Verify **OpenAI API key and credits** status  
3. Contact via **GitHub Issues** with detailed information

### Contact
- 🐛 **Bug Reports**: [GitHub Issues](https://github.com/bongho/attn-obsidian/issues)
- 💡 **Feature Requests**: [GitHub Discussions](https://github.com/bongho/attn-obsidian/discussions)
- 📧 **Other Inquiries**: bongho@example.com

## 📈 Update Roadmap

### v2.1 (Planned)
- [ ] Support for multiple audio formats (MP3, WAV, etc.)
- [ ] Full transcript text template support
- [ ] Batch processing functionality
- [ ] Custom prompt configuration

### v2.2 (Planned) 
- [ ] Local AI model support (Whisper.cpp)
- [ ] Speaker recognition feature
- [ ] Real-time audio processing

---

<div align="center">

**🎉 Experience a new dimension of meeting note-taking with ATTN!**

[![⭐ Star this repo](https://img.shields.io/github/stars/bongho/attn-obsidian?style=social)](https://github.com/bongho/attn-obsidian/stargazers)
[![🍴 Fork this repo](https://img.shields.io/github/forks/bongho/attn-obsidian?style=social)](https://github.com/bongho/attn-obsidian/network/members)

*Made with ❤️ by [bongho](https://github.com/bongho) using TDD methodology*

</div>