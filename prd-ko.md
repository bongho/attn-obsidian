# ATTN (Audio To Tidied Notes) - 제품요구사항명세서

## 📋 제품 개요

ATTN은 M4A 오디오 파일을 OpenAI Whisper(음성-텍스트 변환)와 GPT(지능형 요약)를 활용해 체계적인 회의록으로 자동 변환하는 Obsidian 플러그인입니다. 최소한의 노력으로 회의 녹음을 조직화되고 검색 가능한 노트로 변환할 수 있도록 Obsidian 워크플로우와 완벽하게 통합됩니다.

## 🎯 제품 비전

**"회의 녹음을 Obsidian 내에서 실행 가능하고 체계적인 노트로 손쉽게 변환할 수 있도록 한다."**

## 🚀 핵심 가치 제안

- **원클릭 자동화**: M4A 파일 우클릭 → "ATTN: 노트 생성하기" 선택 → 체계적인 회의록 완성
- **AI 기반 지능형 처리**: OpenAI Whisper(STT) + GPT-4(요약) 조합으로 고품질 결과 제공
- **완벽한 Obsidian 통합**: 커스터마이징 가능한 템플릿과 폴더 구조로 네이티브 플러그인 경험 제공
- **엔터프라이즈 지원**: 지능형 청킹과 폴백 메커니즘으로 대용량 파일(48MB+) 지원

## 👥 대상 사용자

### 주요 사용자
- **지식 근로자**: 정기적인 회의를 진행하고 체계적인 문서화가 필요한 전문가
- **컨설턴트 및 프리랜서**: 클라이언트 회의를 효율적으로 문서화해야 하는 개인
- **학생 및 연구자**: 강의나 인터뷰를 녹음하는 학술 사용자
- **팀 리더**: 회의 결과가 적절히 문서화되도록 보장해야 하는 관리자

### 사용자 페르소나
1. **"회의 관리자 민수"**: 주 5-10회 회의를 진행하며 일관된 문서화가 필요한 팀장
2. **"컨설턴트 수진"**: 클라이언트 회의 녹음을 빠르게 처리해야 하는 독립 컨설턴트
3. **"학생 지훈"**: 연구 인터뷰를 녹음하고 구조화된 전사본이 필요한 대학원생

## 🔧 기술 아키텍처

### 핵심 구성요소

#### 1. **메인 플러그인 컨트롤러** (`main.ts`)
- **목적**: Obsidian 플러그인 진입점 및 오케스트레이션
- **주요 기능**: 
  - 파일 탐색기 컨텍스트 메뉴 통합
  - 설정 관리
  - 플러그인 생명주기 관리

#### 2. **API 서비스 레이어** (`apiService.ts`)
- **목적**: 오디오 처리 워크플로우의 중앙 오케스트레이션
- **주요 기능**:
  - 멀티프로바이더 지원 (OpenAI, Gemini, Local)
  - 대용량 파일을 위한 지능형 청킹 (>25MB)
  - 점진적 폴백 메커니즘
  - 스트리밍 콜백을 통한 실시간 진행상황 추적
  - 성능 모니터링 및 메트릭 수집

#### 3. **오디오 처리 파이프라인**
- **오디오 세그멘터** (`audioSegmenter.ts`): FFmpeg 통합을 통한 스마트 파일 분할
- **오디오 프로세서** (`audioProcessor.ts`): 청킹 워크플로우 및 배치 처리
- **프로바이더 시스템**: STT 및 요약 서비스를 위한 플러그인 가능한 아키텍처

#### 4. **프로바이더 아키텍처**
- **STT 프로바이더**: OpenAI Whisper, Gemini Speech, Local Whisper
- **요약 프로바이더**: OpenAI GPT, Gemini Pro, Local LLM
- **팩토리 패턴**: 설정 기반 동적 프로바이더 인스턴스화

#### 5. **템플릿 시스템**
- **템플릿 프로세서** (`templateProcessor.ts`): 날짜/시간 함수가 포함된 Handlebars 스타일 템플릿
- **노트 크리에이터** (`noteCreator.ts`): Obsidian 통합 노트 생성
- **템플릿 로더** (`templateLoader.ts`): 외부 템플릿 파일 지원

## ✨ 기능 명세

### 🎵 핵심 오디오 처리

#### 음성-텍스트 변환 (STT)
- **지원 형식**: M4A (주요), MP3, WAV, MP4
- **파일 크기 제한**: 청크당 최대 25MB (더 큰 파일은 자동 분할)
- **언어 지원**: 한국어 (주요), 영어, Whisper를 통한 50+ 언어
- **출력 형식**: 타임스탬프, 세그먼트, 화자 정보가 포함된 Verbose JSON
- **품질 기능**:
  - 자동 언어 감지
  - 노이즈 감소 및 오디오 정규화
  - 컨텍스트 인식 세그먼테이션

#### 요약 및 분석
- **AI 모델**: GPT-4 (주요), GPT-3.5-turbo, Gemini Pro
- **요약 유형**:
  - **표준**: 1시간 미만 회의용
  - **계층적**: 1시간 이상 초장시간 회의용 다단계 처리
- **출력 구조**:
  - 참가자 분석이 포함된 회의 개요
  - 주요 논의 사항 및 결정
  - 액션 아이템 및 후속 조치
  - 시간별 대화 흐름

### 🛠️ 고급 설정

#### 멀티프로바이더 지원
- **STT 프로바이더**:
  - OpenAI Whisper (클라우드)
  - Gemini Speech API
  - Local Whisper (faster-whisper-cpp, whisper.cpp)
- **요약 프로바이더**:
  - OpenAI GPT 모델
  - Gemini Pro
  - Ollama를 통한 Local LLM

#### 처리 설정
- **청킹 옵션**: 설정 가능한 청크 지속시간 및 중복
- **오디오 전처리**: 샘플 레이트 변환, 채널 믹싱
- **무음 감지**: 지능형 세그먼트 분할
- **화자 분리**: 다중 화자 회의 지원 (계획 중)

### 📝 템플릿 시스템

#### 내장 플레이스홀더
```
{{filename}}         - 원본 오디오 파일명
{{summary}}          - AI 생성 요약  
{{transcript}}       - 전체 전사 텍스트
{{speakerTranscript}} - 화자별 전사본
{{date:FORMAT}}      - 유연한 날짜 포맷팅
{{time:FORMAT}}      - 시간 포맷팅
{{speakers}}         - 감지된 화자 목록
```

#### 템플릿 기능
- **외부 템플릿 파일**: `.md` 파일에서 템플릿 로드
- **조건부 로직**: 선택적 콘텐츠를 위한 `{{#if}}` 블록
- **날짜/시간 함수**: 날짜 포맷팅을 위한 Moment.js 통합
- **사용자 정의 폴더 구조**: 템플릿 기반 동적 폴더 생성

### 🔍 성능 및 신뢰성

#### 오류 처리 및 폴백
- **점진적 성능 저하**: 요약 실패 시에도 STT 결과 제공
- **토큰 제한 관리**: 초보수적 토큰 추정 및 자르기
- **네트워크 복원력**: 지수 백오프를 통한 자동 재시도
- **우아한 실패**: 실행 가능한 가이드가 포함된 사용자 친화적 오류 메시지

#### 성능 최적화
- **스트리밍 처리**: 긴 작업 중 실시간 진행상황 업데이트
- **병렬 처리**: 여러 청크를 위한 배치 전사
- **캐싱 전략**: 중간 결과 보존
- **메모리 관리**: 대용량 파일을 위한 효율적 버퍼 처리

#### 모니터링 및 디버깅
- **성능 메트릭**: 상세한 타이밍 및 성공률 추적
- **디버그 로깅**: 설정 가능한 레벨을 가진 포괄적 로깅 시스템
- **오류 분석**: 구조화된 오류 리포팅 및 분석

### 🎨 사용자 경험

#### Obsidian 통합
- **컨텍스트 메뉴**: 오디오 파일 우클릭으로 즉시 처리
- **파일 탐색기**: 네이티브 Obsidian 파일 처리
- **설정 패널**: 포괄적 설정 인터페이스
- **진행 표시기**: 처리 중 시각적 피드백

#### 국제화
- **한국어**: 네이티브 프롬프트 엔지니어링과 함께 주요 언어
- **영어**: 전체 기능 지원
- **다국어**: 50+ 언어를 위한 STT 지원

## 📊 성공 메트릭

### 주요 KPI
- **처리 성공률**: >95% 성공적인 전사 완료
- **사용자 채택**: 플러그인 설치 및 일일 활성 사용률
- **처리 시간**: 오디오에서 노트 완료까지 평균 시간
- **사용자 만족도**: 피드백 점수 및 기능 사용 패턴

### 기술 메트릭
- **토큰 효율성**: 콘텐츠 길이 대비 평균 사용 토큰
- **오류율**: 오류 유형별 실패한 처리 시도
- **성능**: 오디오 분당 처리 시간
- **신뢰성**: 가동 시간 및 가용성 메트릭

## 🗓️ 개발 로드맵

### 현재 상태 (v1.0.0)
- ✅ 핵심 STT 및 요약 파이프라인
- ✅ OpenAI Whisper + GPT 통합
- ✅ 동적 플레이스홀더를 가진 템플릿 시스템
- ✅ 대용량 파일 청킹 및 처리
- ✅ 오류 처리 및 폴백 메커니즘
- ✅ 성능 모니터링 및 메트릭
- ✅ 구조화된 전사본 포맷팅

### 단기 개선사항 (v1.1)
- 🔄 멀티프로바이더 지원 (Gemini, Local LLM)
- 🔄 다중 참가자 회의를 위한 화자 분리
- 🔄 더 많은 플레이스홀더를 가진 향상된 템플릿 시스템
- 🔄 여러 파일을 위한 배치 처리
- 🔄 내보내기 옵션 (PDF, Word 등)

### 미래 로드맵 (v2.0+)
- 🔮 회의 중 실시간 전사
- 🔮 캘린더 시스템과의 통합
- 🔮 고급 분석 및 회의 인사이트
- 🔮 팀 협업 기능
- 🔮 모바일 앱 컴패니언

## 🔒 보안 및 프라이버시

### 데이터 보호
- **API 키 보안**: Obsidian 설정에 안전한 저장
- **데이터 보존 없음**: API를 통해 처리된 오디오는 영구 저장 없음
- **로컬 처리 옵션**: 로컬 Whisper/LLM 배포 지원
- **프라이버시 우선**: 원격 분석 또는 사용 데이터 수집 없음

### 규정 준수 고려사항
- **GDPR 준비**: 개인 데이터 저장 또는 추적 없음
- **엔터프라이즈 보안**: 온프레미스 배포 지원
- **API 보안**: 서비스 제공업체와의 암호화된 통신

## 🎯 경쟁 분석

### 장점
- **네이티브 Obsidian 통합**: 완벽한 워크플로우 통합
- **AI 기반 지능형 처리**: 최고 수준의 전사 및 요약
- **커스터마이징 가능한 템플릿**: 유연한 노트 포맷팅
- **대용량 파일 지원**: 엔터프라이즈 규모의 오디오 파일 처리
- **멀티프로바이더 아키텍처**: 유연성과 신뢰성

### 시장 포지셔닝
- **주요 경쟁사**: Otter.ai, Rev.com, Notion AI
- **차별화**: 고급 커스터마이징을 가진 Obsidian 네이티브 경험
- **타겟 시장**: Obsidian 파워 유저 및 지식 근로자

## 🚀 성공 기준

### 출시 성공
- [ ] Obsidian Community Plugin 스토어에 플러그인 게시
- [ ] 첫 달 >1,000 다운로드
- [ ] 실제 사용에서 <5% 오류율
- [ ] 긍정적인 커뮤니티 피드백 및 리뷰

### 장기 성공
- [ ] >10,000개 활성 설치
- [ ] 인기 있는 Obsidian 워크플로우와의 통합
- [ ] 커뮤니티 기여 및 생태계 성장
- [ ] 필수 생산성 플러그인으로 인정

---

## 📞 연락처 및 지원

**개발자**: 이봉호  
**저장소**: https://github.com/bongho/ATTN  
**라이선스**: MIT  
**지원**: GitHub Issues 및 Discussions  

---

*이 PRD는 2025년 9월 현재 ATTN의 현재 상태와 비전을 나타냅니다. 사용자 피드백과 기술 발전에 따라 기능과 명세가 발전할 수 있습니다.*