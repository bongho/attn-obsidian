# 🎵 Audio To Tidied Notes (ATTN)

[![Tests](https://github.com/bongho/attn-obsidian/actions/workflows/test.yml/badge.svg)](https://github.com/bongho/attn-obsidian/actions/workflows/test.yml)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![TypeScript](https://img.shields.io/badge/TypeScript-007ACC?style=flat&logo=typescript&logoColor=white)](https://www.typescriptlang.org/)
[![Obsidian](https://img.shields.io/badge/Obsidian-483699?style=flat&logo=obsidian&logoColor=white)](https://obsidian.md/)

> 🚀 **TDD로 구축된 고품질 Obsidian 플러그인**  
> M4A 오디오 파일을 OpenAI Whisper & GPT를 통해 체계적인 회의록으로 자동 변환

## ✨ 핵심 기능

### 🎯 **원클릭 자동화**
- M4A 파일 우클릭 → "ATTN: 노트 생성하기" 선택만으로 완료
- OpenAI Whisper로 음성을 텍스트로 변환
- GPT-4로 구조화된 회의록 자동 생성

### 🛠️ **고급 커스터마이징** (v2.0 NEW!)
- **📁 저장 폴더 경로**: 생성될 노트 저장 위치 자유 설정
- **📝 파일명 템플릿**: 플레이스홀더로 동적 파일명 생성
- **🎨 노트 내용 템플릿**: 완전 맞춤형 노트 구조 디자인

### 🔧 **템플릿 엔진**
**사용 가능한 플레이스홀더:**
```
{{filename}}        - 원본 오디오 파일명
{{summary}}          - AI 생성 요약
{{transcript}}       - 전체 텍스트 (향후 지원)
{{date:YYYY-MM-DD}}  - 날짜 (다양한 형식 지원)
{{time:HH:mm}}       - 시간 (다양한 형식 지원)
```

**템플릿 예시:**
```
📁 저장 폴더: "회의록/{{date:YYYY}}/{{date:MM월}}"
📄 파일명 템플릿: "{{date:MM-DD}}-{{filename}}"
📝 내용 템플릿:
# 📅 {{date:YYYY년 MM월 DD일}} 회의록

**🎵 원본 파일:** {{filename}}  
**⏰ 생성 시각:** {{time:HH:mm}}

## 📋 요약
{{summary}}

---
*🤖 ATTN 플러그인으로 자동 생성됨*
```

### 🌍 **다국어 지원**
- **한국어 최적화**: 한국어 음성 인식 및 요약에 특화
- 다른 언어도 OpenAI API 지원 범위 내에서 동작

### 🔐 **보안**
- API 키 로컬 저장 (안전한 Obsidian 플러그인 데이터)
- 외부 서버에 데이터 저장하지 않음 (OpenAI 처리 제외)

## 📦 설치 방법

### Obsidian Community Plugins에서 설치 (권장)

1. Obsidian 설정 → Community Plugins 이동
2. "Audio To Tidied Notes" 검색
3. 설치 및 활성화

### 수동 설치

```bash
# 1. 릴리스에서 다운로드
cd {VaultFolder}/.obsidian/plugins/
git clone https://github.com/bongho/attn-obsidian.git
cd attn-obsidian

# 2. 의존성 설치 및 빌드
npm install
npm run build

# 3. Obsidian 재시작 후 플러그인 활성화
```

## ⚙️ 초기 설정

1. **OpenAI API 키 획득**
   - [OpenAI Platform](https://platform.openai.com/api-keys)에서 API 키 생성
   - 결제 방법 등록 필요 (사용량 기반 과금)

2. **FFmpeg 설치** (오디오 속도 조절용, 선택사항)
   ```bash
   # macOS (Homebrew)
   brew install ffmpeg
   
   # Windows (Chocolatey)
   choco install ffmpeg
   
   # Ubuntu/Debian
   sudo apt install ffmpeg
   ```

3. **플러그인 설정**
   ```
   Obsidian 설정 → Community Plugins → Audio To Tidied Notes
   
   📝 기본 설정:
   - OpenAI API Key: sk-... (필수)
   - 저장 폴더 경로: / (루트)
   - 파일명 템플릿: {{date:YYYY-MM-DD}}-{{filename}}-회의록
   - 내용 템플릿: (기본 회의록 형식)
   - 오디오 속도 배수: 1x (기본) / 2x / 3x
   ```

## 🚀 사용 방법

### 기본 사용법
1. **M4A 파일**을 Obsidian 볼트에 추가
2. 파일 탐색기에서 **우클릭**
3. **"ATTN: 요약 노트 생성하기"** 선택
4. 처리 완료까지 대기 (진행률 알림 표시)
5. 자동 생성된 체계적인 회의록 확인! 🎉

### 고급 커스터마이징 예시

**비즈니스 미팅용 템플릿:**
```
📁 저장 폴더: "Business/Meetings/{{date:YYYY}}"
📄 파일명: "{{date:MM-DD}}-{{filename}}"
📝 내용:
# 📊 비즈니스 미팅 - {{date:YYYY.MM.DD}}

**참석자 파일:** {{filename}}  
**일시:** {{date:YYYY년 MM월 DD일}} {{time:HH:mm}}

## 🎯 핵심 요약
{{summary}}

## 📋 액션 아이템
- [ ] TBD (요약에서 추출)

---
**다음 미팅:** 미정  
*🤖 Generated by ATTN*
```

**스터디 그룹용 템플릿:**
```
📁 저장 폴더: "Study/{{date:YYYY}}/{{date:MM월}}"
📄 파일명: "Week{{date:WW}}-{{filename}}"
📝 내용:
# 📚 스터디 노트

**날짜:** {{date:YYYY-MM-DD (ddd)}}  
**시간:** {{time:HH:mm}}  
**파일:** {{filename}}

## 💡 주요 내용
{{summary}}

## 📝 메모
- 

---
*📖 Study Group*
```

## 🧪 개발자 정보

### TDD 방법론으로 구축된 고품질 코드베이스

```bash
✅ 80개 총 테스트 (73개 통과, 91.25% 성공률)
✅ TypeScript 기반 type-safe 구현
✅ ESLint + Prettier 코드 품질 관리
✅ Jest 기반 종합 테스트 커버리지
✅ 모듈식 아키텍처 (확장성 & 유지보수성)
```

### 개발 환경 설정

```bash
# 리포지토리 클론
git clone https://github.com/bongho/attn-obsidian.git
cd attn-obsidian

# 의존성 설치
npm install

# 개발 모드 실행 (Hot reload)
npm run dev

# 테스트 실행
npm test

# 테스트 커버리지 확인
npm test -- --coverage

# 타입 체크
npm run typecheck

# 린트 검사
npm run lint

# 프로덕션 빌드
npm run build
```

### 프로젝트 구조

```
ATTN/
├── src/                          # 📁 소스 코드
│   ├── main.ts                  # 🎭 오케스트레이터 (모든 모듈 조율)
│   ├── settings.ts              # ⚙️ 설정 UI 관리
│   ├── templateProcessor.ts     # 🎨 템플릿 엔진 (NEW!)
│   ├── apiService.ts            # 🤖 OpenAI API 연동
│   ├── noteCreator.ts           # 📝 노트 생성 (리팩토링됨)
│   └── types.ts                 # 📋 TypeScript 인터페이스
├── tests/                       # 🧪 TDD 테스트 스위트
│   ├── TemplateProcessor.test.ts # 🆕 템플릿 엔진 테스트
│   ├── SettingsTab.test.ts      # 📈 확장된 설정 테스트
│   ├── ApiService.test.ts       # 🔄 API 로직 테스트
│   ├── NoteCreator.test.ts      # 🔄 노트 생성 테스트
│   └── main.test.ts             # 🔄 통합 테스트
├── package.json                 # 📦 의존성 관리
├── tsconfig.json               # ⚙️ TypeScript 설정
├── jest.config.js              # 🧪 테스트 설정
└── main.js                     # 🚀 빌드된 플러그인
```

## 💰 API 사용 비용

OpenAI API 사용료:
- **Whisper API**: ~$0.006/분 (음성 → 텍스트)
- **GPT-4 API**: 텍스트 길이에 따라 변동 (요약 생성)

*예시: 30분 회의 → 약 $0.20~0.50*

## 🏗️ 아키텍처 특징

### Before & After 비교

| 구분 | v1.0 (기존) | v2.0 (확장) |
|------|------------|------------|
| **파일명** | `고정: 파일명-회의록.md` | `템플릿: {{date:MM-DD}}-{{filename}}` |
| **저장 위치** | `루트 폴더만` | `자유로운 폴더 구조` |
| **노트 형식** | `고정 템플릿` | `완전 커스터마이징 가능` |
| **확장성** | `제한적` | `플레이스홀더 무제한 조합` |

### TDD 개발 성과

```
🧪 Phase 1: Settings Enhancement & Template Engine
  ✅ ATTNSettings 인터페이스 확장
  ✅ SettingsTab UI 컴포넌트 추가
  ✅ TemplateProcessor 모듈 구현

🔄 Phase 2: Core Logic Refactoring  
  ✅ NoteCreator 책임 단순화
  ✅ main.ts 오케스트레이터 패턴 적용
  ✅ 모듈 간 결합도 최소화

✨ Result: 확장 가능하고 유지보수가 용이한 아키텍처
```

## 🤝 기여하기

1. **Fork** 리포지토리
2. **Feature branch** 생성 (`git checkout -b feature/amazing-feature`)
3. **Tests** 먼저 작성 (TDD 방식)
4. **구현** 및 테스트 통과 확인
5. **Commit** (`git commit -m 'Add some amazing feature'`)
6. **Push** (`git push origin feature/amazing-feature`)
7. **Pull Request** 생성

### 기여 가이드라인

- ✅ **TDD 필수**: 테스트를 먼저 작성해주세요
- ✅ **TypeScript**: 타입 안전성을 유지해주세요  
- ✅ **ESLint**: 코드 스타일을 준수해주세요
- ✅ **테스트 커버리지**: 새 기능은 90% 이상 커버리지 유지

## 📄 라이선스

MIT License - 자세한 내용은 [LICENSE](LICENSE) 파일 참조

## 🙋‍♂️ 지원 & 문의

### 문제 해결
1. **콘솔 에러 메시지** 확인
2. **OpenAI API 키 및 크레딧** 상태 확인  
3. **GitHub Issues**에 상세한 정보와 함께 문의

### 연락처
- 🐛 **버그 리포트**: [GitHub Issues](https://github.com/bongho/attn-obsidian/issues)
- 💡 **기능 요청**: [GitHub Discussions](https://github.com/bongho/attn-obsidian/discussions)
- 📧 **기타 문의**: bongho@example.com

## 📈 업데이트 로드맵

### v2.1 (계획)
- [ ] 다중 오디오 형식 지원 (MP3, WAV, etc.)
- [ ] Transcript 전문 텍스트 템플릿 지원
- [ ] 배치 처리 기능
- [ ] 커스텀 프롬프트 설정

### v2.2 (계획) 
- [ ] 로컬 AI 모델 지원 (Whisper.cpp)
- [ ] 화자 인식 기능
- [ ] 실시간 오디오 처리

---

<div align="center">

**🎉 ATTN으로 회의록 작성의 새로운 차원을 경험하세요!**

[![⭐ Star this repo](https://img.shields.io/github/stars/bongho/attn-obsidian?style=social)](https://github.com/bongho/attn-obsidian/stargazers)
[![🍴 Fork this repo](https://img.shields.io/github/forks/bongho/attn-obsidian?style=social)](https://github.com/bongho/attn-obsidian/network/members)

*Made with ❤️ by [bongho](https://github.com/bongho) using TDD methodology*

</div>